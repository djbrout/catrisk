<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CatRisk - Hurricane Protection</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #ffffff;
      color: #1a1a1a;
      min-height: 100vh;
    }

    /* Navigation */
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      border-bottom: 1px solid #e5e5e5;
      background: #fff;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .logo span {
      color: #f97316;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
    }

    .nav-links a {
      color: #666;
      text-decoration: none;
      font-size: 0.9rem;
    }

    .nav-links a:hover {
      color: #1a1a1a;
    }

    .connect-btn {
      background: #1a1a1a;
      color: #fff;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
    }

    /* Main Container */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 2rem 0;
    }

    .hero h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .hero p {
      color: #666;
      font-size: 1rem;
    }

    /* Search Section */
    .search-section {
      max-width: 500px;
      margin: 1.5rem auto;
    }

    .search-wrapper {
      display: flex;
      gap: 0.5rem;
    }

    .search-input {
      flex: 1;
      background: #fff;
      border: 1px solid #ddd;
      padding: 0.8rem 1rem;
      border-radius: 8px;
      font-size: 1rem;
    }

    .search-input:focus {
      outline: none;
      border-color: #f97316;
    }

    .search-btn {
      background: #f97316;
      color: #fff;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
    }

    .search-btn:hover {
      background: #ea580c;
    }

    /* Map Section */
    .map-section {
      margin: 2rem 0;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #e5e5e5;
    }

    #map {
      height: 300px;
      width: 100%;
    }

    .map-info {
      background: #f9f9f9;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .map-location {
      font-weight: 500;
    }

    .map-location span {
      color: #666;
      font-weight: 400;
      font-size: 0.9rem;
    }

    .map-radius {
      color: #f97316;
      font-weight: 500;
    }

    /* Coverage Status */
    .coverage-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }

    .coverage-status.covered {
      background: #f0fdf4;
      color: #166534;
    }

    .coverage-status.not-covered {
      background: #fef2f2;
      color: #991b1b;
    }

    .status-icon {
      font-size: 1.2rem;
    }

    /* Markets Section */
    .markets-section {
      margin-top: 2rem;
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .market-card {
      background: #fff;
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }

    .market-card:hover {
      border-color: #f97316;
    }

    .market-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .market-title {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .market-prob {
      color: #f97316;
      font-weight: 600;
    }

    .market-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .detail-box {
      background: #f9f9f9;
      padding: 1rem;
      border-radius: 8px;
      text-align: center;
    }

    .detail-label {
      font-size: 0.8rem;
      color: #666;
      margin-bottom: 0.25rem;
    }

    .detail-value {
      font-size: 1.25rem;
      font-weight: 600;
    }

    .detail-value.green {
      color: #16a34a;
    }

    .detail-value.blue {
      color: #2563eb;
    }

    .detail-sub {
      font-size: 0.75rem;
      color: #888;
    }

    .market-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
    }

    .btn {
      padding: 0.75rem;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      font-size: 0.9rem;
      border: none;
    }

    .btn-primary {
      background: #16a34a;
      color: #fff;
    }

    .btn-secondary {
      background: #2563eb;
      color: #fff;
    }

    .btn:hover {
      opacity: 0.9;
    }

    /* How it works */
    .how-section {
      margin-top: 3rem;
      padding: 2rem;
      background: #f9f9f9;
      border-radius: 12px;
    }

    .steps {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .step {
      text-align: center;
    }

    .step-num {
      width: 36px;
      height: 36px;
      background: #f97316;
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin: 0 auto 0.75rem;
    }

    .step-title {
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .step-desc {
      color: #666;
      font-size: 0.85rem;
    }

    /* Yield Section */
    .yield-section {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid #e5e5e5;
    }

    .section-desc {
      color: #666;
      margin-bottom: 1.5rem;
    }

    .yield-cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .yield-card {
      background: #fff;
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      padding: 1.5rem;
      position: relative;
    }

    .yield-card.featured {
      border-color: #16a34a;
      background: #f0fdf4;
    }

    .featured-badge {
      position: absolute;
      top: -10px;
      right: 16px;
      background: #16a34a;
      color: #fff;
      font-size: 0.7rem;
      font-weight: 600;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
    }

    .yield-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }

    .yield-title {
      font-weight: 600;
      font-size: 1.1rem;
    }

    .yield-apy {
      font-size: 1.5rem;
      font-weight: 700;
      color: #16a34a;
    }

    .yield-apy span {
      font-size: 0.8rem;
      font-weight: 400;
      color: #666;
    }

    .yield-desc {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 1rem;
      line-height: 1.4;
    }

    .yield-stats {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 1rem;
    }

    .yield-stat-value {
      font-weight: 600;
      font-size: 1.1rem;
    }

    .yield-stat-label {
      font-size: 0.75rem;
      color: #888;
    }

    .yield-detail {
      background: #fff;
      border-radius: 8px;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border: 1px solid #dcfce7;
    }

    .yield-detail-row {
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
      margin-bottom: 0.4rem;
    }

    .yield-detail-row:last-child {
      margin-bottom: 0;
    }

    .green { color: #16a34a; }
    .red { color: #dc2626; }

    /* Basket Info */
    .basket-info {
      background: #f9f9f9;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .basket-header {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .basket-desc {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 0.75rem;
    }

    .basket-zips {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .zip-tag {
      background: #fff;
      border: 1px solid #ddd;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      color: #666;
    }

    @media (max-width: 768px) {
      .yield-cards {
        grid-template-columns: 1fr;
      }
    }

    /* Footer */
    footer {
      margin-top: 3rem;
      padding: 2rem;
      border-top: 1px solid #e5e5e5;
      text-align: center;
      color: #888;
      font-size: 0.85rem;
    }

    /* Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: #fff;
      border-radius: 12px;
      padding: 1.5rem;
      width: 100%;
      max-width: 400px;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .modal-title {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #888;
    }

    .input-group {
      margin-bottom: 1rem;
    }

    .input-label {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      color: #666;
    }

    .amount-input {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1.1rem;
    }

    .amount-input:focus {
      outline: none;
      border-color: #f97316;
    }

    .payout-preview {
      background: #f0fdf4;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .payout-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .payout-row:last-child {
      margin-bottom: 0;
      padding-top: 0.5rem;
      border-top: 1px solid #dcfce7;
      font-weight: 600;
    }

    .payout-row .green {
      color: #16a34a;
    }

    .confirm-btn {
      width: 100%;
      padding: 0.75rem;
      background: #16a34a;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      font-size: 1rem;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .steps {
        grid-template-columns: repeat(2, 1fr);
      }
      .nav-links {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="logo">Cat<span>Risk</span></div>
    <div class="nav-links">
      <a href="#">Markets</a>
      <a href="#">Earn Yield</a>
      <a href="#">Docs</a>
    </div>
    <button class="connect-btn">Connect Wallet</button>
  </nav>

  <div class="container">
    <!-- Hero -->
    <div class="hero">
      <h1>Hurricane Protection for Your ZIP Code</h1>
      <p>Buy shares at 4¢. Get $1 per share if a hurricane hits your area.</p>
    </div>

    <!-- Search -->
    <div class="search-section">
      <div class="search-wrapper">
        <input type="text" class="search-input" id="address-input" placeholder="Enter your ZIP code or address" value="33139">
        <button class="search-btn" onclick="searchLocation()">Search</button>
      </div>
    </div>

    <!-- Map -->
    <div class="map-section">
      <div id="map"></div>
      <div class="map-info">
        <div class="map-location" id="location-text">
          Miami Beach, FL <span>ZIP 33139</span>
        </div>
        <div class="map-radius" id="radius-text">15 mile radius</div>
      </div>
    </div>

    <!-- Coverage Status -->
    <div class="coverage-status covered" id="coverage-status">
      <span class="status-icon">✓</span>
      <span>Your address is within the coverage area</span>
    </div>

    <!-- Markets -->
    <div class="markets-section">
      <div class="section-title">Available Protection</div>

      <!-- Market 1 -->
      <div class="market-card">
        <div class="market-header">
          <div class="market-title">Cat 3+ Hurricane within 15 miles</div>
          <div class="market-prob">4¢ <span style="color:#888;font-weight:400;font-size:0.8rem;">(4% implied)</span></div>
        </div>

        <div class="market-details">
          <div class="detail-box">
            <div class="detail-label">If hurricane hits</div>
            <div class="detail-value green">$25,000</div>
            <div class="detail-sub">4¢ per share → $1 payout</div>
          </div>
          <div class="detail-box">
            <div class="detail-label">If no hurricane</div>
            <div class="detail-value blue">8.3% APY</div>
            <div class="detail-sub">Earn yield</div>
          </div>
        </div>

        <button class="btn btn-primary" onclick="showModal()" style="width: 100%;">Buy Protection</button>
      </div>

    </div>

    <!-- Earn Yield Section -->
    <div class="yield-section">
      <div class="section-title">Earn Yield</div>
      <p class="section-desc">Take the other side of protection buyers. Earn yield when hurricanes don't hit.</p>

      <div class="yield-cards">
        <!-- Single ZIP -->
        <div class="yield-card">
          <div class="yield-header">
            <div class="yield-title">Single ZIP</div>
            <div class="yield-apy">8.3% <span>APY</span></div>
          </div>
          <div class="yield-desc">
            Provide liquidity for one ZIP code. Higher risk, higher reward.
          </div>
          <div class="yield-stats">
            <div class="yield-stat">
              <div class="yield-stat-value">4%</div>
              <div class="yield-stat-label">Risk of loss</div>
            </div>
            <div class="yield-stat">
              <div class="yield-stat-value">1</div>
              <div class="yield-stat-label">ZIP code</div>
            </div>
          </div>
          <button class="btn btn-secondary" onclick="showYieldModal('single')">Select ZIP</button>
        </div>

        <!-- Diversified Basket -->
        <div class="yield-card featured">
          <div class="featured-badge">RECOMMENDED</div>
          <div class="yield-header">
            <div class="yield-title">Diversified Basket</div>
            <div class="yield-apy">8% <span>APY</span></div>
          </div>
          <div class="yield-desc">
            Spread across 50+ ZIP codes. Diversification reduces risk while maintaining yield.
          </div>
          <div class="yield-stats">
            <div class="yield-stat">
              <div class="yield-stat-value">&lt;1%</div>
              <div class="yield-stat-label">Risk of total loss</div>
            </div>
            <div class="yield-stat">
              <div class="yield-stat-value">50+</div>
              <div class="yield-stat-label">ZIP codes</div>
            </div>
          </div>
          <div class="yield-detail">
            <div class="yield-detail-row">
              <span>Expected return</span>
              <span class="green">+8%</span>
            </div>
            <div class="yield-detail-row">
              <span>Worst case (2005-level)</span>
              <span class="red">-15%</span>
            </div>
            <div class="yield-detail-row">
              <span>Historical avg loss</span>
              <span>-3.2%</span>
            </div>
          </div>
          <button class="btn btn-primary" onclick="showYieldModal('basket')">Deposit USDC</button>
        </div>
      </div>
    </div>

    <!-- How it works -->
      <div class="section-title">How It Works</div>
      <div class="steps">
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-title">Enter ZIP</div>
          <div class="step-desc">Find markets for your location</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-title">Buy Protection</div>
          <div class="step-desc">Pay premium in USDC</div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-title">Wait</div>
          <div class="step-desc">Hurricane season: Jun-Nov</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-title">Get Paid</div>
          <div class="step-desc">Automatic payout if triggered</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    This is not insurance. CatRisk is a prediction market protocol. Use at your own risk.
  </footer>

  <!-- Modal -->
  <div class="modal-overlay" id="modal">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">Buy Protection</div>
        <button class="modal-close" onclick="hideModal()">×</button>
      </div>

      <div class="input-group">
        <label class="input-label">Amount (USDC)</label>
        <input type="number" class="amount-input" id="amount" value="1000" onchange="updatePayout()">
      </div>

      <div class="payout-preview">
        <div class="payout-row">
          <span>You pay</span>
          <span id="pay-amount">$1,000</span>
        </div>
        <div class="payout-row">
          <span>Fee (1%)</span>
          <span id="fee-amount">$10</span>
        </div>
        <div class="payout-row">
          <span>If hurricane hits</span>
          <span class="green" id="payout-amount">$25,000</span>
        </div>
      </div>

      <button class="confirm-btn">Connect Wallet to Continue</button>
    </div>
  </div>

  <!-- Yield Modal -->
  <div class="modal-overlay" id="yield-modal">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="yield-modal-title">Deposit to Basket</div>
        <button class="modal-close" onclick="hideYieldModal()">×</button>
      </div>

      <div class="basket-info" id="basket-info">
        <div class="basket-header">Diversified Basket</div>
        <div class="basket-desc">Your deposit is spread across 50+ coastal ZIP codes from Florida to Texas.</div>
        <div class="basket-zips">
          <span class="zip-tag">33139 Miami Beach</span>
          <span class="zip-tag">33101 Miami</span>
          <span class="zip-tag">33040 Key West</span>
          <span class="zip-tag">77058 Houston</span>
          <span class="zip-tag">+46 more</span>
        </div>
      </div>

      <div class="input-group">
        <label class="input-label">Deposit Amount (USDC)</label>
        <input type="number" class="amount-input" id="yield-amount" value="5000" onchange="updateYieldPreview()">
      </div>

      <div class="payout-preview" style="background: #eff6ff;">
        <div class="payout-row">
          <span>Your deposit</span>
          <span id="yield-deposit">$5,000</span>
        </div>
        <div class="payout-row">
          <span>Expected return (6 mo)</span>
          <span class="green" id="yield-return">+$460 (8%)</span>
        </div>
        <div class="payout-row">
          <span>Worst case (2005-level)</span>
          <span class="red" id="yield-worst">-$750 (-15%)</span>
        </div>
        <div class="payout-row" style="border-top: 1px solid #dbeafe; padding-top: 0.5rem;">
          <span>Unlock date</span>
          <span>Dec 15, 2026</span>
        </div>
      </div>

      <button class="confirm-btn" style="background: #2563eb;">Connect Wallet to Continue</button>
    </div>
  </div>

  <script>
    // ZIP code data
    const zipData = {
      '33139': { name: 'Miami Beach, FL', lat: 25.7907, lng: -80.1300 },
      '33101': { name: 'Miami, FL', lat: 25.7743, lng: -80.1937 },
      '77058': { name: 'Houston, TX', lat: 29.5511, lng: -95.0970 },
      '33040': { name: 'Key West, FL', lat: 24.5551, lng: -81.7800 },
      '90210': { name: 'Beverly Hills, CA', lat: 34.0901, lng: -118.4065 },
    };

    // Default location
    let currentLocation = zipData['33139'];
    let map, marker, circle;

    // Initialize map
    function initMap() {
      map = L.map('map').setView([currentLocation.lat, currentLocation.lng], 10);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
      }).addTo(map);

      // Add marker for ZIP centroid
      marker = L.marker([currentLocation.lat, currentLocation.lng]).addTo(map);

      // Add radius circle (15 miles = ~24.14 km)
      circle = L.circle([currentLocation.lat, currentLocation.lng], {
        color: '#f97316',
        fillColor: '#f97316',
        fillOpacity: 0.1,
        radius: 24140 // 15 miles in meters
      }).addTo(map);
    }

    // Search location
    function searchLocation() {
      const input = document.getElementById('address-input').value.trim();

      // Check if it's a known ZIP
      if (zipData[input]) {
        currentLocation = zipData[input];
        updateMap();
        document.getElementById('location-text').innerHTML =
          `${currentLocation.name} <span>ZIP ${input}</span>`;
        document.getElementById('coverage-status').className = 'coverage-status covered';
        document.getElementById('coverage-status').innerHTML =
          '<span class="status-icon">✓</span><span>Your address is within the coverage area</span>';
      } else {
        // For demo, show as not found but could integrate geocoding API
        document.getElementById('coverage-status').className = 'coverage-status not-covered';
        document.getElementById('coverage-status').innerHTML =
          '<span class="status-icon">✗</span><span>ZIP code not found. Try: 33139, 33101, 77058</span>';
      }
    }

    // Update map to new location
    function updateMap() {
      map.setView([currentLocation.lat, currentLocation.lng], 10);
      marker.setLatLng([currentLocation.lat, currentLocation.lng]);
      circle.setLatLng([currentLocation.lat, currentLocation.lng]);
    }

    // Modal functions
    function showModal() {
      document.getElementById('modal').classList.add('show');
    }

    function hideModal() {
      document.getElementById('modal').classList.remove('show');
    }

    function updatePayout() {
      const amount = parseInt(document.getElementById('amount').value) || 0;
      const fee = amount * 0.01;
      const payout = amount * 25;

      document.getElementById('pay-amount').textContent = '$' + amount.toLocaleString();
      document.getElementById('fee-amount').textContent = '$' + fee.toLocaleString();
      document.getElementById('payout-amount').textContent = '$' + payout.toLocaleString();
    }

    // Close modal on outside click
    document.getElementById('modal').addEventListener('click', function(e) {
      if (e.target === this) hideModal();
    });

    document.getElementById('yield-modal').addEventListener('click', function(e) {
      if (e.target === this) hideYieldModal();
    });

    // Yield Modal
    function showYieldModal(type) {
      const modal = document.getElementById('yield-modal');
      const title = document.getElementById('yield-modal-title');
      const basketInfo = document.getElementById('basket-info');

      if (type === 'basket') {
        title.textContent = 'Deposit to Diversified Basket';
        basketInfo.style.display = 'block';
      } else {
        title.textContent = 'Deposit to Single ZIP';
        basketInfo.style.display = 'none';
      }

      modal.classList.add('show');
      updateYieldPreview();
    }

    function hideYieldModal() {
      document.getElementById('yield-modal').classList.remove('show');
    }

    function updateYieldPreview() {
      const amount = parseInt(document.getElementById('yield-amount').value) || 0;
      const expectedReturn = amount * 0.08;
      const worstCase = amount * -0.15;

      document.getElementById('yield-deposit').textContent = '$' + amount.toLocaleString();
      document.getElementById('yield-return').textContent = '+$' + expectedReturn.toLocaleString() + ' (8%)';
      document.getElementById('yield-worst').textContent = '-$' + Math.abs(worstCase).toLocaleString() + ' (-15%)';
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', initMap);
  </script>
</body>
</html>
